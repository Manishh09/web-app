<div class="header-container mat-elevation-z1">
    <span class="header-text" mat-dialog-title>
      {{data.title}}
    </span>
    <button mat-icon-button (click)="onCancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <mat-card class="center-card">

    <form [formGroup]="requirementForm" (ngSubmit)="onSubmit()" class="vendor-form" >
      <div class="form">
        <div class="form-column-left">
          <!-- Req Number -->
          <mat-form-field appearance="fill">
            <mat-label>Req Number</mat-label>
            <input matInput formControlName="reqnumber" maxlength="12" readonly>
          </mat-form-field>

          <!-- Date -->
          <mat-form-field appearance="fill">
            <mat-label>Date</mat-label>
            <input matInput formControlName="postedon" maxlength="12" readonly>
          </mat-form-field>

          <!-- Select Vendor/Impl -->
          <div formGroupName="vendorimpl" class="fg-div">
            <mat-form-field appearance="fill">
            <mat-label>Select Vendor/Impl</mat-label>
            <input matInput formControlName="vmsid" [matAutocomplete]="vendorAutoCmp" maxlength="50">
            <mat-autocomplete #vendorAutoCmp="matAutocomplete">
              <mat-option *ngFor="let option of (searchObs$ | async)" [value]="option.company" (onSelectionChange)="recruiterList(option)">{{ option.company.trim() }}</mat-option>
            </mat-autocomplete>
            <button type="button" matSuffix mat-icon-button (click)="goToVendorList()"><mat-icon>add</mat-icon></button>
            <mat-hint *ngIf="(searchObs$ | async)?.length === 0">No results found, click '+' to add vendor</mat-hint>
            <mat-error *ngIf="controls['vendorimpl.vmsid']?.errors && controls['vendorimpl.vmsid']?.errors?.['required']"> Vendor Company is required</mat-error>

          </mat-form-field>
          </div>

          <!-- Client -->
          <mat-form-field appearance="fill">
            <mat-label>Client</mat-label>
            <input matInput formControlName="client" maxlength="15">
          </mat-form-field>

          <!-- Job Title -->
          <mat-form-field appearance="fill">
            <mat-label>Job Title</mat-label>
            <input matInput formControlName="jobtitle"  maxlength="50">
            <mat-error *ngIf="controls['jobtitle'].errors && controls['jobtitle'].errors['required']"> Job Title is required</mat-error>
          </mat-form-field>

          <!-- Select Technology -->
          <div class="fg-div" formGroupName="technology">
            <mat-form-field appearance="fill" class="form-technology">
              <mat-label>Select Technology</mat-label>
              <input matInput formControlName="id" [matAutocomplete]="techAutoCmp" maxlength="50">
              <mat-autocomplete #techAutoCmp="matAutocomplete">
                <mat-option *ngFor="let option of  (techSearchObs$ | async)" [value]="option[1]" (onSelectionChange)="techSkills(option)">{{ option[1] }}</mat-option>
              </mat-autocomplete>
              <button type="button" matSuffix mat-icon-button (click)="goToTechnologyList()"><mat-icon>add</mat-icon></button>
            </mat-form-field>
          </div>

           <!-- Skills -->
          <mat-form-field class="description-field">
            <mat-label>Skills</mat-label>
            <textarea formControlName="jobskills"  matInput></textarea>
          </mat-form-field>

          <!-- Job Description -->
          <mat-form-field class="description-field">
            <mat-label>Job Description</mat-label>
            <textarea formControlName="jobdescription" maxlength="250" matInput
              ></textarea>
              <mat-error *ngIf="controls['jobdescription'].errors && controls['jobdescription'].errors['required']"> Job Description is required</mat-error>
          </mat-form-field>

            <!-- Location -->
            <mat-form-field appearance="fill">
              <mat-label>Location</mat-label>
              <input matInput formControlName="location" ngx-gp-autocomplete [options]='options' (onAddressChange)="handleAddressChange($event)">
              <mat-error *ngIf="controls['location'].errors && controls['location'].errors['required']"> Location is required</mat-error>
            </mat-form-field>
        </div>

        <div class="form-column-right">
          <!-- Job Experience   -->
          <mat-form-field appearance="fill">
            <mat-label>Job Experience</mat-label>
            <input matInput  formControlName="jobexperience" maxlength="7">
          </mat-form-field>

          <!-- Employee Type -->
          <div style="width: 80%;">
            <mat-label>Employee Type</mat-label><br>
            <mat-radio-group formControlName="employmenttype" aria-label="Select an option">
              <mat-radio-button value="C2C">C2C</mat-radio-button>
              <mat-radio-button value="1099">1099</mat-radio-button>
              <mat-radio-button value="W2">W2</mat-radio-button>
              <mat-radio-button value="Full Time">Full Time</mat-radio-button>
              <mat-radio-button value="C2H">C2H</mat-radio-button>
              <mat-error *ngIf="controls['employmenttype'].errors && controls['employmenttype'].errors['required']">Employment Type is required</mat-error>
            </mat-radio-group>
          </div>
          
          <!-- Assign Recruiter -->
          <mat-form-field appearance="fill">
            <mat-label>Assign Recruiter</mat-label>
              <mat-chip-grid #chipGrid aria-label="Assign Recruiter" formControlName="empid">
                <mat-chip-row *ngFor="let employee of employees" (removed)="remove(employee)">
                  {{ employee }}
                  <button matChipRemove [attr.aria-label]="'remove ' + employee">
                    <mat-icon>cancel</mat-icon>
                  </button>
                </mat-chip-row>
              </mat-chip-grid>
              
              <input
                #employeeInput
                formControlName="empid"
                [matChipInputFor]="chipGrid"
                [matAutocomplete]="auto"
                (matChipInputTokenEnd)="add($event)"
              />
              <mat-autocomplete #auto="matAutocomplete" formControlName="empid" (optionSelected)="selected($event)">
                <mat-option *ngFor="let employee of (empSearchObs$ | async)" [value]="employee.fullname">
                  {{ employee.fullname }}
                </mat-option>
              </mat-autocomplete>
              
              
            <mat-error *ngIf="controls['empid'].errors && controls['empid'].errors['required']">Select Recruiter</mat-error>
          </mat-form-field>
          

          <!-- <mat-form-field>
            <mat-label>Assign Recruiter</mat-label>
            <mat-select formControlName="empid" (optionSelected)="selected($event)" multiple>
              <mat-option *ngIf="!selectAllChecked"  [value]="'Select All'" (change)="selectAllOptions()">
                Select All
              </mat-option>
              <mat-option *ngFor="let emp of empArr" [value]="emp.fullname">{{ emp.fullname }}</mat-option>
            </mat-select>
          </mat-form-field> -->
          

           <!-- Select POC -->
           <div class="fg-div" formGroupName="recruiter">
            <mat-form-field>
              <mat-label>Select POC</mat-label>
              <mat-select formControlName="recid" (selectionChange)="recruiterContact($event)">
                <mat-option *ngFor="let obj of recruiterArr" [value]="obj.id">{{obj.recruiter}}</mat-option>
              </mat-select>
              <button type="button" matSuffix mat-icon-button (click)="goToRecruiterList()"><mat-icon>add</mat-icon></button>
              <mat-error *ngIf="controls['recruiter.recid']?.errors && controls['recruiter.recid']?.errors?.['required']">Contact Person Name is required</mat-error>
            </mat-form-field>
           </div>

           <!-- POC Position -->
           <mat-form-field appearance="fill">
            <mat-label>POC Position</mat-label>
            <input matInput formControlName="pocposition" maxlength="100">
          </mat-form-field>

          <!-- POC Email -->
          <mat-form-field appearance="fill">
            <mat-label>POC Email</mat-label >
            <input matInput formControlName="pocemail" maxlength="35">
          </mat-form-field>

          <!-- POC Contact Number -->
          <mat-form-field appearance="fill">
            <mat-label>POC Contact Number</mat-label>
            <input matInput formControlName="pocphonenumber" maxlength="100">
          </mat-form-field>
          
          <!-- Salary / Hourly Rate -->
          <mat-form-field appearance="fill">
            <mat-label>Salary / Hourly Rate</mat-label>
            <input matInput formControlName="salary" maxlength="100">
          </mat-form-field>

          <!-- Project Duration -->
          <mat-form-field appearance="fill">
            <mat-label>Project Duration</mat-label>
            <input matInput formControlName="duration" maxlength="100">
            <mat-error *ngIf="controls['duration'].errors && controls['duration'].errors['required']"> Project duration is required</mat-error>
          </mat-form-field>


          <!-- Select Status -->
          <mat-form-field appearance="fill" *ngIf="data.actionName === 'edit-requirement'">
            <mat-label>Select Status</mat-label>
              <mat-select formControlName="status">
                <mat-option *ngFor="let option of selectOptionObj.statusType"
                [value]="option">
                {{ option }}
              </mat-option>
              </mat-select>
          </mat-form-field>
        </div>
      </div>


    </form>
    <div class="form-button-right">
      <!-- <div class="form-button-inner"> -->
      <button mat-raised-button color="white" (click)="onCancel()">Cancel</button>
      <button mat-raised-button color="primary" (click)="onSubmit()">Submit</button>
      <!-- </div> -->
    </div>
  </mat-card>
