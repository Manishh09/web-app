<div class="container">
  <ul class="breadcrumb">
    <li><a href="#" routerLink="/dashboard">Home</a></li>
    <li><a href="#" routerLink="/users">Recruiters</a></li>
  </ul>
  <div class="header-container mat-elevation-z1">
    <span class="header-text"> Recruiters </span>
    <span class="filter-recruiters">
      <button mat-raised-button color="warn">Technical Recruiter</button>
      <button mat-raised-button color="primary">Bench Sales Recruiter</button>
      <button mat-raised-button >Both Technical & Bench Sales Recruiters</button>
    </span>
    <div class="recruiter-actions">
      <!-- <button mat-icon-button (click)="uploadRecruiterExcel()">
        <mat-icon>upload</mat-icon> 
      </button> -->
      <button mat-icon-button class="add-user" (click)="addRecruiter()">
        <mat-icon class="item-icon">person_add</mat-icon>
      </button>

      <div class="search-recruiter">
        <input
          matInput
          type="search"
          class="search"
          placeholder="search recruiter"
          (keyup)="onFilter($event)"
        />
      </div>
    </div>
  </div>
  <div id="table-container" class="table-wrapper">
    <section class="recruiter-table-style mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort (matSortChange)="onSort($event)" oncopy="return false"
      onpaste="return false" oncut="return false">
        <ng-container matColumnDef="SerialNum">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>#</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter?.serialNum }}</td>
        </ng-container>

        <ng-container matColumnDef="Company">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Company</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter.company }}</td>
        </ng-container>

        <ng-container matColumnDef="RecruiterName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Recruiter Name</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter.recruiter }}</td>
        </ng-container>

        <ng-container matColumnDef="PhoneNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Phone Number</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter.usnumber }}</td>
        </ng-container>

        <ng-container matColumnDef="Email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter.email }}</td>
        </ng-container>

        <ng-container matColumnDef="AddedBy">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Added By</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter.pseudoname }}</td>
        </ng-container>

        <ng-container matColumnDef="AddedOn">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Added On</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter.createddate }}</td>
        </ng-container>

        <ng-container matColumnDef="LastUpdated">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Updated</th>
          <td mat-cell *matCellDef="let recruiter">{{ recruiter.updateddate }}</td>
        </ng-container>

        <!-- <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
          <td mat-cell *matCellDef="let recruiter">
          <span>
            <button mat-raised-button (click)="onStatusUpdate(recruiter)" *ngIf="hasAcces!='Employee'  && hasAcces!='Team Lead'"
              [ngStyle]="{ color: 'white' }"
              [ngClass]="recruiter.status === 'Approved' ? 'mat-primary' : recruiter.status === 'Active' ? 'mat-primary' : 'mat-warn'">
              {{ recruiter.status }}
            </button>
          </span>
        </td>
        </ng-container> -->

        <!-- Action Column -->
        <ng-container matColumnDef="Action">
          <th mat-header-cell *matHeaderCellDef>Action</th>
          <td mat-cell *matCellDef="let recruiter" class="action-buttons">
            <button mat-icon-button (click)="editRecruiter(recruiter)" class="action-button-ed" *ngIf="hasAcces!='Employee'  && hasAcces!='Team Lead'">
              <mat-icon class="edit-icon">edit</mat-icon>
            </button>

            <button mat-icon-button (click)="deleteRecruiter(recruiter)" class="action-button-ed" *ngIf="hasAcces!='Employee'  && hasAcces!='Team Lead'">
              <mat-icon class="delete-icon">delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="Approve/Reject">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Approve/Reject</th>
          <td mat-cell *matCellDef="let recruiter" class="approve-buttons">
                <ng-container *ngIf="['Approved'].includes(recruiter.rec_stat);  else ifNotApproved">
      
                  <button  mat-raised-button (click)="onApproveOrRejectRecruiter(recruiter)" *ngIf="hasAcces!='Employee'  && hasAcces!='Team Lead'"
                    [ngStyle]="{ color: 'white' }"
                    [ngClass]="recruiter.rec_stat === 'Approved'  ?   'mat-primary' : recruiter.rec_stat === 'Initiated'  ?  'mat-secondary' : 'mat-warn'">
                    {{recruiter.rec_stat}}
                  </button>
      
                </ng-container >
                  <ng-template #ifNotApproved>
                    <!-- Initiated BUTTON -->
                    <button  *ngIf="['Initiated'].includes(recruiter.rec_stat)" mat-raised-button (click)="onApproveOrRejectRecruiter(recruiter)" 
                    [ngStyle]="{ color: 'white' }"
                    [ngClass]="'mat-primary'"> {{recruiter.rec_stat}}
                  </button>
      
                  <!-- Reject BUTTON -->
      
                    <button  mat-raised-button (click)="onApproveOrRejectRecruiter(recruiter ,true)" *ngIf="hasAcces!='Employee'  && hasAcces!='Team Lead'"
                    [ngStyle]="{ color: 'white' }"
                    [ngClass]="'mat-warn'"> {{'Reject'}}
                  </button>
      
                </ng-template>
          </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="dataTableColumns; sticky: true"
        ></tr>
        <tr mat-row *matRowDef="let row; columns: dataTableColumns" [ngClass]="getRecruiterRowClass(row)"></tr>
        
      </table>
      <p class="no-data-found" *ngIf="!dataSource.filteredData.length">
        {{ "No matching data found" }}
      </p>
    </section>

    <hr />
    
  </div>
  <div class="paginator">
    <!-- paginator -->
    <mat-paginator
      #paginator
      [length]="dataSource.data.length"
      (page)="handlePageEvent($event)"
      [length]="length"
      [pageSize]="pageSize"
      [disabled]="false"
      [showFirstLastButtons]="showFirstLastButtons"
      [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
      [hidePageSize]="hidePageSize"
      [pageIndex]="pageIndex"
      aria-label="Select page"
    >
    </mat-paginator>
  </div>
</div>
